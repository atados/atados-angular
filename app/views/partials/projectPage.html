<div id="project-page" ng-if="project.published">
  <div id="project-header">
      <div class="container">
        <div class="row">
          <div class="col-md-3" id="project-image">
            <div style="padding-bottom: 75%; background: url('{{project.image_url}}') no-repeat center center / cover;"></div>
            <div class="hidden-xs hidden-sm margin-top">
              <button id="atar-button" ng-disabled="loggedUser && loggedUser.role==='NONPROFIT'" ng-hide="project.closed || alreadyApplied" class="btn" ng-class="{active: alreadyApplied}" ng-click="applyVolunteerToProject()">Quero me inscrever</button>
              <button id="atar-button" ng-disabled="loggedUser && loggedUser.role==='NONPROFIT'" ng-show="alreadyApplied" class="btn" ng-class="{active: alreadyApplied}" ng-click="applyVolunteerToProject()"><i class="fa fa-chain-broken"></i> Não quero mais</button>
              <button id="atar-button" disabled ng-hide="alreadyApplied || !project.closed" class="btn"><i class="fa fa-times"></i> Vaga Fechada</button>
            </div>
          </div>
          <div class="col-md-8">
            <h1 id="project-name">{{project.name}}</h1>
            <div id="project-type">
              <p ng-if="project.work"><i class="fa fa-refresh"></i> Vaga Recorrente</p>
              <p ng-if="project.job">
              <i class="fa fa-clock-o"></i> Vaga Pontual
              </p>
              <span ng-if="project.job && project.job.start_date && project.job.end_date">
                <small ng-if="projectJobInOneDay && !projectJobInSameTime">
                  {{project.job.start_date | date:"(EEEE) dd 'de' MMMM 'de' yyyy"}} das {{project.job.start_date | date:"h:mm a"}} até {{project.job.end_date | date:"h:mm a"}}
                </small>
                <small ng-if="!projectJobInOneDay">
                  {{project.job.start_date | date:"dd 'de' MMMM 'de' yyyy"}} até {{project.job.end_date | date:"dd 'de' MMMM 'de' yyyy"}}
                </small>
              </span>

            </div>
            <div id="project-nonprofit">
              <a ui-sref="root.nonprofit({slug: nonprofit.user.slug})" id="nonprofit-img">
                <div style="padding-bottom: 100%; background: #fff url('{{project.nonprofit_image}}') no-repeat center center / contain; border-radius: 5px;">
                </div>
              </a>
              <span>
                <a ui-sref="root.nonprofit({slug: nonprofit.user.slug})">
                  <p id="nonprofit-name"><strong>{{nonprofit.name}}</strong></p>
                </a>
                <p id="nonprofit-local">{{project.nonprofit_city_state}}</p>
                <a ng-if="nonprofit.facebook_page" href="{{nonprofit.facebook_page}}" target="_blank"><i class="fa fa-facebook-square"></i></a>
                <a ng-if="nonprofit.google_page" href="{{nonprofit.google_page}}" target="_blank"><i class="fa fa-twitter"></i></a>
                <a ng-if="nonprofit.twitter_handle" href="{{nonprofit.twitter_handle}}" target="_blank"><i class="fa fa-google-plus"></i></a>
                <a ng-if="nonprofit.website" href="{{nonprofit.website}}" target="_blank"><i class="fa fa-home"></i></a>
              </span>
            </div>

            <div id="project-icons" class="row">
              <div class="col-xs-6" ng-if="project.causes">
                <p>Causas</p>
                <div class="img-circle icon-image" ng-repeat="cause in project.causes">
                  <div title="{{cause.name}}">
                    <img alt="{{cause.name}}" tooltip="{{cause.name}}" width="20" height="20" ng-src="{{cause.image}}"/>
                  </div>
                </div>
              </div>
              <div class="col-xs-6" ng-if="project.skills">
                <p>Habilidades</p>
                <div class="img-circle icon-image" ng-repeat="skill in project.skills">
                  <div title="{{skill.name}}">
                    <img alt="{{skill.name}}" tooltip="{{skill.name}}" width="20" height="20" ng-src="{{skill.image}}"/>
                  </div>
                </div>
              </div>
            </div>

            <div class="hidden-lg hidden-md margin-top">
              <button id="atar-button" ng-disabled="loggedUser && loggedUser.role==='NONPROFIT'" ng-hide="project.closed || alreadyApplied" class="btn" ng-class="{active: alreadyApplied}" ng-click="applyVolunteerToProject()">Quero me inscrever</button>
              <button id="atar-button" ng-disabled="loggedUser && loggedUser.role==='NONPROFIT'" ng-show="alreadyApplied" class="btn" ng-class="{active: alreadyApplied}" ng-click="applyVolunteerToProject()"><i class="fa fa-chain-broken"></i> Não quero mais</button>
              <button id="atar-button" disabled ng-hide="alreadyApplied || !project.closed" class="btn"><i class="fa fa-times"></i> Vaga Fechada</button>
            </div>

          </div>
        </div>
      </div>
  </div>

  <div id="project-details">
    <div class="container">
      <div class="row">
        <div id="left-sidebar" class="col-md-3">
          <h5>Sobre a organização</h5>
          <p>{{project.nonprofit.description}}</p>
          <div id="project-map" ng-if="!isRemote(project)">
            <h5>Localização</h5>

            <gm-map
            ng-if="project.address.lat !== 0 && project.address.lng !== 0"
            gm-map-id="'projectAddressMap'"
            gm-center="center"
            gm-zoom="zoom"
            gm-map-options="options.map"
            class="map"
            style="width:100%;height:200px">

            <gm-markers
            gm-objects="markers"
            gm-id="object.id"
            gm-position="{ lat: object.lat, lng: object.lng }">
            </gm-markers>
            </gm-map>

            <p ng-if="project.address" class="margin-top"><i class="fa fa-map-marker margin-right"></i> <span ng-bind-html="project.address | as_location_string"></span> </p>
          </div>
          <p ng-if="isRemote(project)" id="project-remote"><i class="fa fa-rss"></i> Trabalho remoto</p>

          <div id="project-responsible">
            <h5>Responsável pela vaga</h5>
            <p ng-if="project.responsible"><i class="fa fa-laptop margin-right"></i>{{project.responsible}}</a></p>
          </div>

          <div id="project-volunteers" class="margin-top">
            <h5 ng-show="project.volunteers.length > 1">{{project.volunteers.length}} voluntários inscritos</h5>
            <h5 ng-show="project.volunteers.length == 1">{{project.volunteers.length}} voluntário inscrito</h5>

            <div id="cards">
              <a ui-sref="root.volunteer({slug: volunteer.slug})" target="_blank" ng-repeat="volunteer in project.volunteers">
                <img alt="{{volunteer.slug}}" width="47" height="47" ng-src="{{volunteer.image_url}}"/>
              </a>
            </div>
          </div>

        <div ng-if="project.facebook_event" id="project-facebook">
          <a href="{{project.facebook_event}}" target="_blank"><i class="fa fa-facebook-square"></i> Veja a Vaga no Facebook !</a>
        </div>

      </div>
      <div class="col-md-6">
        <h3 class="no-margin-top">Sobre a Vaga</h3>
        <div ng-bind-html="project.details | noHTML | newlines" linkify="twitter"></div>

        <div ng-if="project.roles" id="project-roles">
          <h3 ng-if="project.role.length > 0">Cargos</h3>
          <div ng-repeat="role in project.roles" class="role">
            <h4>{{role.name}}</h4>
            <p ng-if="role.details">{{role.details}}</p>
            <p ng-if="role.prerequisites"><strong>Pré-requisito:</strong> {{role.prerequisites}}</p>
            <p ng-if="role.vacancies"><strong>Vagas:</strong> {{role.vacancies}}</p>
          </div>
        </div>
        <div ng-if="project.work" id="project-availabilities">
          <h3>Horários disponíveis</h3>
          <p ng-if="project.work.weekly_hours"><strong>Horas por semana: </strong>{{project.work.weekly_hours}}</p>
          <div ng-if="showTimeTable">
            <div class="availability" ng-repeat="a in project.work.availabilities">
              <span ng-if="a.weekday === 0">Domingo</span>
              <span ng-if="a.weekday === 1">Segunda-feira</span>
              <span ng-if="a.weekday === 2">Terça-feira</span>
              <span ng-if="a.weekday === 3">Quarta-feira</span>
              <span ng-if="a.weekday === 4">Quinta-feira</span>
              <span ng-if="a.weekday === 5">Sexta-feira</span>
              <span ng-if="a.weekday === 6">Sábado</span>
              <span ng-if="a.period === 0">de manhã</span>
              <span ng-if="a.period === 1">de tarde</span>
              <span ng-if="a.period === 2">de noite</span>
            </div>
          </div>
        </div>
        <div class="fb-comments" data-href="https://www.atados.com.br/vaga/{{project.slug}}" data-numposts="5" data-colorscheme="light" data-width="100%"></div>
        </div>
      </div>
    </div>

  </div>
</div>
<div id="project-not-published" ng-if="!project.published">
  <p>Esta vaga ainda não foi aprovada.<br>Assim que nossa equipe aprovar, esta vaga ficará disponível.</p>
</div>
